class Clara{static prevWidth=null;static projects=[{id:"una-cosa-bianca",img:"img/una-cosa-bianca/una-cosa-bianca-1.jpg",height:250,year:"2024-2025",title:"Una cosa bianca"},{id:"intima-materia",video:"img/intima-materia/intima-materia.mp4",height:250,year:"2023",title:"Intima Materia"},{id:"la-forme-fermee",img:"img/la-forme-fermee/la-forme-fermee-1.jpg",height:310,year:"2021",title:"La forme fermèe"},{id:"sedimenti",img:"img/sedimenti/sedimenti-1.jpg",height:400,year:"2021",title:"Sedimenti"},{id:"faccia",video:"img/faccia/faccia-3.mp4",height:180,year:"2019",title:"Io sono l'altra faccia di te"},{id:"300-grammi",video:"img/300-grammi/300-grammi.mp4",height:400,year:"2019",title:"300 grammi"},{id:"ex-voto",img:"img/ex-voto/ex-voto-1.jpg",height:350,year:"2019",title:"Ex Voto"},{id:"legami",img:"img/legami/legami-1.jpg",height:250,year:"2018",title:"Legami"},{id:"lettera-occhi",img:"img/lettera-occhi/lettera-occhi-1.jpg",height:310,year:"2018",title:"Lettera dai Tuoi Occhi"},{id:"attraverso",img:"img/attraverso/attraverso-2.jpg",height:400,year:"2018",title:"Attraverso"},{id:"vanitas",img:"img/vanitas/vanitas-1.jpg",height:180,year:"2018",title:"Vanitas Vanitatum et Omnia Vanitas"},{id:"no-violence",img:"img/no-violence/no-violence-1.jpg",height:400,year:"2018",title:"Image no violence on woman"},{id:"ricorda",img:"img/ricorda/ricorda-1.jpg",height:350,year:"2017",title:"Ricorda di essere stato straniero"},{id:"mnemosine",img:"img/mnemosine/mnemosine-1.jpg",height:200,year:"2016-2017",title:"Mnemosine"},{id:"chrysalis",img:"img/chrysalis/chrysalis-13.jpg",height:200,year:"2016",title:"Chrysalis"},{id:"radici",img:"img/radici/radici-1.jpg",height:200,year:"2015-2016",title:"Radici"}];static init(){Clara.setYear(),window.addEventListener("popstate",(e=>{Clara.view()})),Clara.view(),window.addEventListener("load",Clara.renderProjects),Clara.prevWidth=window.innerWidth,window.addEventListener("resize",(()=>{const e=window.innerWidth;e>Clara.prevWidth&&(clearTimeout(window.__resizeTimeout),window.__resizeTimeout=setTimeout(renderProjects,200)),Clara.prevWidth=e}))}static view(e=null){if(e)history.pushState({},e,"/"!==e?"?"+e:"/");else{const t=new URLSearchParams(window.location.search);let i=document.querySelectorAll(".project");for(const a of i)t.has(a.getAttribute("data-project"))&&(e=a.getAttribute("data-project"))}Clara.showProject("/"===e?null:e)}static showProject(e){let t=document.querySelector("body");if(!e)return t.classList.remove("no-overflow"),void document.querySelector(".project.selected")?.classList.remove("selected");let i=document.querySelector(`[data-project="${e}"]`);i&&(i.classList.add("selected"),t.classList.add("no-overflow"),new Lightbox(i.querySelectorAll(".project-img")))}static scrollTo(){document.querySelector(".work.selected").querySelector(".work-gallery").scroll({top:0,behavior:"smooth"})}static scrollDown(e){let t=document.querySelector(".work.selected"),i=t.querySelector(".work-gallery").scrollTop+500,a=t.querySelector(".work-gallery");e.classList.contains("is-bottom")&&(i=0),a.scroll({top:i,behavior:"smooth"})}static setYear(){document.querySelector(".year").innerHTML=(new Date).getFullYear()}static getColumnCount(e){return e<768?1:e<1024?2:e<1440?3:4}static isMobile(){return window.matchMedia("(max-width: 425px)").matches}static renderProjects(){let e=document.querySelector(".project-list");e.innerHTML="";const t=e.getBoundingClientRect().width,i=Clara.getColumnCount(t),a=[];for(let t=0;t<i;t++){const t=document.createElement("div");t.className="project-column",e.appendChild(t),a.push(t)}Clara.projects.forEach(((e,t)=>{const r=document.createElement("div");r.className="project-item",e.id?r.setAttribute("onclick",`Clara.view('${e.id}')`):r.classList.add("intro");const s=e.img||e.video?Math.floor((Clara.isMobile()?150:300)+300*Math.random()):10,o=e.img?`<div class="project-img-container"><div class="project-img" style="height:${s}px;background-image: url(${e.img})"></div></div>`:"",n=e.video?`<div class="project-img-container" style="height:${s}px;"><video class="project-video" autoplay muted loop playsinline  src="${e.video}"></video></div>`:"",l=e.year?'<div class="project-item-year">'+e.year+"</div>":"",c=e.title?'<div class="project-item-title">'+e.title+"</div>":"";r.innerHTML=`${o}${n}${c}${l}`,a[t%i].appendChild(r)}))}}class Lightbox{constructor(e){this.images=Array.from(e),this.currentIndex=0,this.buildOverlay(),this.attachEvents()}buildOverlay(){this.overlay=document.createElement("div"),this.overlay.className="lightbox-overlay",this.imgElement=document.createElement("img"),this.overlay.appendChild(this.imgElement),this.btnClose=document.createElement("div"),this.btnClose.className="lightbox-btn lightbox-close",this.btnClose.innerText="✕",this.overlay.appendChild(this.btnClose),this.btnPrev=document.createElement("div"),this.btnPrev.className="lightbox-btn lightbox-prev",this.btnPrev.innerText="⟵",this.overlay.appendChild(this.btnPrev),this.btnNext=document.createElement("div"),this.btnNext.className="lightbox-btn lightbox-next",this.btnNext.innerText="⟶",this.overlay.appendChild(this.btnNext),document.body.appendChild(this.overlay)}attachEvents(){this.images.forEach(((e,t)=>{e.addEventListener("click",(()=>this.show(t)))})),this.overlay.addEventListener("click",(e=>{e.target!==this.overlay&&e.target!==this.btnClose||this.hide()})),this.btnNext.addEventListener("click",(e=>{e.stopPropagation(),this.next()})),this.btnPrev.addEventListener("click",(e=>{e.stopPropagation(),this.prev()})),document.addEventListener("keydown",(e=>{this.overlay.classList.contains("show")&&("Escape"===e.key&&this.hide(),"ArrowRight"===e.key&&this.next(),"ArrowLeft"===e.key&&this.prev())}))}show(e){this.currentIndex=e,this.imgElement.src=this.images[this.currentIndex].src,this.overlay.classList.add("show")}hide(){this.overlay.classList.remove("show")}next(){this.currentIndex=(this.currentIndex+1)%this.images.length,this.imgElement.src=this.images[this.currentIndex].src}prev(){this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length,this.imgElement.src=this.images[this.currentIndex].src}}Clara.init();